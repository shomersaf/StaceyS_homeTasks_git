//declaring
const courses =[];
const prices =[];
let cName="";
let cPrice = 0;
let counter = 0;
const sendButton = document.querySelector(".sendButton");
sendButton.addEventListener("click", goGoText);
const clearButton = document.querySelector(".clearButton");
clearButton.addEventListener("click", clearForm);
const container = document.querySelector(".container");
//getting
const form = document.forms["myForm"];
//creating
const table = document.createElement("table");
const tHead = document.createElement("thead");
const thName = document.createElement("th");
const thPrice = document.createElement("th");
const thActions = document.createElement("th");
const tBody = document.createElement("tbody");
//appending
container.append(table);


thName.innerText = "Name";
thPrice.innerText = "Price";
thActions.innerText = "Actions";

//functions

function goGoText(){
//declaring 
tHead.append(thName, thPrice, thActions);
table.append(tHead, tBody);
const tRow = document.createElement("tr");
const tdName = document.createElement("td");
const tdPrice = document.createElement("td");
const tdActions = document.createElement("td");
//getting

 cName = form.elements["courseName"];
 cPrice = form.elements["coursePrice"];
courses.push(cName);
prices.push(cPrice);
tdName.innerText = courses[counter].value;
tdPrice.innerText = prices[counter].value;
//buttons
const delButton = document.createElement("button");
delButton.innerText = " X ";
delButton.className = "delRowButton";
delButton.addEventListener("click", delCourse)
tdActions.append(delButton);
//-------
const editButton = document.createElement("button");
  editButton.className = "editButton";
  editButton.innerText = " edit ";
  editButton.addEventListener("click", editCourse)
  tdActions.append(editButton);
//appending
tRow.append(tdName, tdPrice, tdActions);
tBody.append(tRow);
counter++;
tRow.id = counter;
//cleaning form inputs
clearForm();
 
}

function clearForm(){
  form.elements["courseName"].value = "";
form.elements["coursePrice"].value = "";
}


function delCourse(){
 const toDelete =  this.closest('tr');
 toDelete.remove();
 counter--;
 courses.splice(counter-1,1);
 prices.splice(counter-1,1);
 alert(courses.length);
 
}

function editCourse(event){
  const toEdit =  this.closest('tr');
 toEdit.innerHTML =" ";
 const newTdName = document.createElement("td");
 const newTdPrice = document.createElement("td");
 const newTdActions = document.createElement("td");

 const newInputName = document.createElement("input");
 newInputName.className ="newInputName";
 newInputName.type ="text";
 newInputName.id ="enteredName";
 
 const newInputPrice = document.createElement("input");
 newInputPrice.className ="newInputPrice";
 newInputPrice.type ="number";
 newInputPrice.id ="enteredPrice";

 const saveButton = document.createElement("button");
 saveButton.type="submit";
 saveButton.innerText ="save";
 saveButton.classList.add("editButton", "saveButton");
 saveButton.addEventListener("click", saveEntered);
 newTdName.append(newInputName);
 newTdPrice.append(newInputPrice);
 newTdActions.append(saveButton);
 toEdit.append(newTdName, newTdPrice, newTdActions);
 cName = document.querySelector("#enteredName");
 cPrice = document.querySelector("#enteredPrice");

courses.splice[counter,1];
courses.push(cName);
prices.splice[counter,1];
prices.push(cPrice);
counter++;

 }
function saveEntered(){
 
  
  const toEdit =  this.closest('tr');
  toEdit.innerHTML =" ";
  
  
 
  
  const newTdName = document.createElement("td");
  const newTdPrice = document.createElement("td");
  const newTdActions = document.createElement("td");

 newTdName.innerText = courses[counter-1].value;
 newTdPrice.innerText = prices[counter-1].value;

  const delButton = document.createElement("button");
  delButton.innerText = " X ";
  delButton.className = "delRowButton";
  delButton.addEventListener("click", delCourse)

  const editButton = document.createElement("button");
  editButton.className = "editButton";
  editButton.innerText = " edit ";
  editButton.addEventListener("click", editCourse)
  newTdActions.append(delButton, editButton);
 
  toEdit.append(newTdName, newTdPrice,newTdActions);
  counter--;
  alert(courses.length);
}


